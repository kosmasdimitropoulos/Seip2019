package gradeshistogram;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartFrame;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

public class HistogramGenerator {
	
	public void generateChart(ArrayList<Integer> dataValues) {
		
		XYSeriesCollection dataset = new XYSeriesCollection();
		XYSeries data = new XYSeries("Grades");
		
		int i = 0;
		for(int x : dataValues){
			data.add(i, x);
			i++;
		}

		dataset.addSeries(data);

		boolean legend = false; // do not visualize a legend
		boolean tooltips = false; // do not visualize tooltips
		boolean urls = false; // do not visualize urls

		JFreeChart chart = ChartFactory.createXYLineChart("Grades Frequency", "x_axis title", "y_axis_title", dataset,
				PlotOrientation.VERTICAL, legend, tooltips, urls);

		ChartFrame frame = new ChartFrame("First", chart);
		frame.pack();
		// makes the previously created frame visible
		frame.setVisible(true);
	}

	
	public static void main(String[] args) {

		if (args.length == 0) {
			System.out.println("No file is given! Please give a file as an argument!");
		}

		File file = new File(args[0]);
		BufferedReader br = null;

		try {
			br = new BufferedReader(new FileReader(file));
		} catch (FileNotFoundException e) {
			System.err.println("Error" + e);
		}
		
		ArrayList<Integer> dataValues = new ArrayList<Integer>();
		String st;
		try {
			while ((st = br.readLine()) != null)
				System.out.println(st);
		} catch (IOException e) {
			System.err.println("Error" + e);
		}

		HistogramGenerator generateChart = new HistogramGenerator();
		generateChart.generateChart(dataValues);
		
	}
}
